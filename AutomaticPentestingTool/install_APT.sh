#!/bin/bash

tools=(yad python3-pip git nmap nikto dnsenum whatweb wafw00f dirb theHarvester)
apt_tools=(yad python3-pip git nmap nikto dnsenum whatweb wafw00f dirb)
python_tools=(theHarvester)

function instalacion(){
  echo "Instalando...."
  #directorio de instalacion

  #instalacion de herramientas apt
  for tool in ${apt_tools[@]}
  do
    if [ $(dpkg-query -W -f='${Status}' $tool 2>/dev/null | grep -c "ok installed") -eq 0 ];
    then
      echo "Se instalará" $tool;
      sudo apt-get install -y $tool;
    else
      echo $tool "está instalado";
    fi
  done

  #instalacion herramientas python

echo "*****************************************************"
echo "*****************************************************"
echo "Fin de la instalación"
echo "*****************************************************"

}

#programa principal

echo "*****************************************************"
echo "*****************************************************"
echo "Instalación de Automatic Pentesting Tool"
echo "Si no están instaladas se instalarán las herramientas"
echo ${tools[@]}
echo "*****************************************************"

echo -n "¿Quiere continuar?(y/n)"
read continuar

if [ "$continuar" != "${continuar#[Yy]}" ] ;then
  instalacion
else
  echo "Saliendo del programa de instalación";
  exit;
fi

